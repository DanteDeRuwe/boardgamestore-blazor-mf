@using BoardgameStore.Order.Repositories
@using BoardgameStore.Order.Context
@using Microsoft.AspNetCore.Components.Routing;

@attribute [Fragment("nav-items")]

@inject ICartRepository CartRepository;
@inject CartContext CartContext;

<li class="nav-item px-3">
    <NavLink class="nav-link" href="/cart">
        <span class="oi oi-cart" aria-hidden="true"></span> Cart <span class="badge badge-pill badge-light text-success ml-2">@CartRepository.ItemCount</span>
    </NavLink>
</li>

@code{


    protected override void OnInitialized()
    {
        // call state has changed to update the UI when context.cartupdated is invoked
        CartContext.CartUpdated += StateHasChanged;
    }

}